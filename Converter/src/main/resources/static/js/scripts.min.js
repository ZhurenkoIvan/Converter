const btnSubmit=document.querySelector("#submit"),btnChoiseCurrency=document.querySelectorAll(".choise-currency"),btnCurrentCurrency=document.querySelectorAll(".item-currency"),selectNow=document.querySelector("#currency"),selectSale=document.querySelector("#sale-currency"),input=document.querySelector("#available-currency"),result=document.querySelector("#purchased-currency"),btnUpdateBase=document.querySelector("#update"),lastUpdateText=document.querySelector(".lastupdate-date"),statsDayText=document.querySelector(".day-stats"),statsAllDayText=document.querySelector(".allday-stats"),hostCurrency="http://localhost/base_json.json",hostStats="http://localhost/stats.json",hostInfo="http://localhost/transactionInfo.json";async function getDataCurul2(){const e=await fetch(hostCurrency),t=await e.json(),n=await t,o=n.rates;console.log(o);const a=n.date;let c=new Date(a);const s=Object.entries(o);for(let e=0;e<s.length;e++)selectNow.innerHTML+=`<option value="${s[e][0]}">${s[e][0]}</option>`,selectSale.innerHTML+=`<option value="${s[e][0]}">${s[e][0]}</option>`;lastUpdateText.textContent+=" "+c}async function getStatsData(){const e=await fetch(hostStats),t=await e.json(),n=await t,o=Object.entries(n);for(let e=0;e<o.length;e++)statsDayText.innerHTML=`${o[0][1]}`,statsAllDayText.innerHTML=`${o[1][1]}`}function convert(e,t,n){input.value,result.value;fetch(hostCurrency).then((e=>e.json())).then((o=>{let a=o.rates[e].toFixed(2),c=(o.rates[t].toFixed(2)/a*n).toFixed(3);result.value=c}))}function convertRev(e,t,n){input.value,result.value;fetch(hostCurrency).then((e=>e.json())).then((o=>{let a=(o.rates[e].toFixed(2)/o.rates[t].toFixed(2)*n).toFixed(3);input.value=a}))}getDataCurul2(),getStatsData(),btnSubmit.addEventListener("click",(async function(){const e=document.querySelector("#available-currency").value,t=document.querySelector("#purchased-currency").value;let n={};const o=new Date;n.idUser=Math.floor(Math.random()),n.fromCurrency=parseFloat(e),n.fromCurrencyAmount=selectNow.value,n.toCurrency=parseFloat(t),n.toCurrencyAmount=selectSale.value,n.transactionDate=o.getTime();const a=await fetch(hostInfo,{method:"POST",body:JSON.stringify({transactionInfo:n}),headers:{"Content-Type":"application/json"}}),c=await a.json();console.log(c)})),btnUpdateBase.addEventListener("click",(async function(){const e=await fetch("http://localhost/base_json.json"),t=await e.json(),n=await t;console.log(n)})),input.oninput=function(){let e=selectNow.value,t=selectSale.value,n=input.value;e!=t?convert(e,t,n):console.log(Error)},result.oninput=function(){let e=selectNow.value,t=selectSale.value,n=result.value;e!=t?convertRev(e,t,n):console.log(Error)};const btnSingIn=document.querySelector("#btn-sign-in"),btnSingUp=document.querySelector("#btn-sign-up"),inputEmail=document.querySelector("#email-address"),inputPassword=document.querySelector("#password"),form=document.querySelector("#form-sign");function bindModal(e,t,n){e=document.querySelector(e),t=document.querySelector(t),n=document.querySelector(n);const o=document.body;e.addEventListener("click",(e=>{e.preventDefault(),t.style.display="flex",o.classList.add("locked")})),n.addEventListener("click",(()=>{t.style.display="none",o.classList.remove("locked")})),t.addEventListener("click",(e=>{e.target===t&&(t.style.display="none",o.classList.remove("locked"))}))}form.addEventListener("submit",(function(e){e.preventDefault()})),btnSingUp.addEventListener("click",(function(){const e={};e.email=inputEmail.value,e.passwrod=inputPassword.value,console.log(e)})),btnSingIn.addEventListener("click",(function(){const e={};e.email=inputEmail.value,e.passwrod=inputPassword.value,console.log(e)})),bindModal(".btn-sign",".modal__wrapper",".modal__close");